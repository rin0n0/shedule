<template>
    <div class="lesson-card-content" :class="{ compact: isCompact }">
        <div class="info-col">
            <div v-if="lesson.subgroup && mainStore.userSubgroup === 0" class="subject">{{ lesson.subject }}
                ({{
                    lesson.subgroup }})</div>
            <div v-else class="subject">{{ lesson.subject }}</div>
            <div class="meta">
                <span class="teacher" v-if="lesson.teacher">{{ lesson.teacher }}</span>
            </div>
        </div>

        <div class="badges-col">
            <div v-if="lesson.is_replacement" class="badge replacement">üî•</div>
        </div>
    </div>
</template>

<script setup lang="ts">
import type { Lesson } from '@/types';
import { useMainStore } from '@/stores/main_store';

const mainStore = useMainStore();
defineProps<{
    lesson: Lesson,
    isCompact?: boolean
}>();
</script>

<style scoped>
.lesson-card-content {
    display: flex;
    flex-direction: column;
    /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ */
    justify-content: center;
    /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    gap: 6px;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    padding: 5px 0;
    /* –ù–µ–±–æ–ª—å—à–∏–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ */
}

.info-col {
    overflow: hidden;
}

.subject {
    font-size: 15px;
    font-weight: 600;
    line-height: 1.3;
    color: var(--text-primary);
    /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å –¥–æ 3 —Å—Ç—Ä–æ–∫ */
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.meta {
    font-size: 13px;
    color: var(--text-secondary);
}

.badges-col {
    display: flex;
    position: absolute;
    /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —è—á–µ–π–∫–∏ */
    top: 15px;
    right: 15px;
}

.badge {
    width: 22px;
    height: 22px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: bold;
}

.badge.replacement {
    background: #ff3b30;
    color: white;
}

/* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥ –¥–ª—è —Å–ø–ª–∏—Ç-–ø–∞—Ä */
.compact {
    padding: 5px 10px;
    /* –û—Ç—Å—Ç—É–ø—ã –¥–ª—è —Å–ø–ª–∏—Ç-—è—á–µ–µ–∫ */
}

.compact .subject {
    font-size: 14px;
    -webkit-line-clamp: 4;
    /* –ü–æ–∑–≤–æ–ª—è–µ–º –±–æ–ª—å—à–µ —Å—Ç—Ä–æ–∫ –≤ —Å–ø–ª–∏—Ç–µ */
}

.compact .meta {
    font-size: 12px;
}
</style>